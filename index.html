<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mr. Quantum — MRQTUM</title>
  <meta name="description" content="Mr. Quantum (MRQTUM) — the meme coin that collapses timelines into vibes. Built for community and clean execution." />
  <meta property="og:title" content="Mr. Quantum — MRQTUM" />
  <meta property="og:description" content="A meme coin built for fun, clarity, and community execution." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#060812" />
  <link rel="icon" href="logo.png" />

  <style>
    :root{
      --bg0:#050713;
      --bg1:#0b1030;
      --txt:#e9edf7;
      --muted: rgba(233,237,247,.68);
      --line: rgba(233,237,247,.10);
      --line2: rgba(233,237,247,.16);

      --card: rgba(255,255,255,.04);
      --card2: rgba(255,255,255,.06);

      /* From your logo vibes */
      --blue:#2dd4ff;
      --deepblue:#2473ff;
      --purple:#7c3aed;
      --pink:#ff4d8d;

      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
      --max: 1180px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      color:var(--txt);
      line-height:1.6;
      background:
        radial-gradient(1050px 680px at 18% 10%, rgba(36,115,255,.16), transparent 55%),
        radial-gradient(880px 650px at 78% 18%, rgba(124,58,237,.16), transparent 55%),
        radial-gradient(800px 600px at 55% 90%, rgba(255,77,141,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding:0 18px 78px}

    /* Subtle grid overlay */
    .gridbg{
      position:fixed; inset:0; pointer-events:none;
      background:
        linear-gradient(to right, rgba(233,237,247,.035) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(233,237,247,.035) 1px, transparent 1px);
      background-size: 84px 84px;
      mask-image: radial-gradient(680px 460px at 50% 16%, black 38%, transparent 82%);
      opacity:.55;
    }

    /* NAV (pepe.vip-like simple anchors + Buy button) */
    .nav{
      position:sticky; top:0; z-index:60;
      backdrop-filter: blur(12px);
      background: linear-gradient(to bottom, rgba(5,7,19,.78), rgba(5,7,19,.38));
      border-bottom:1px solid var(--line);
    }
    .nav-inner{
      max-width:var(--max);
      margin:0 auto;
      padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:900; letter-spacing:.2px;
    }
    .brand img{
      width:34px; height:34px; border-radius:12px;
      background: rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 16px 34px rgba(36,115,255,.10);
      object-fit:cover;
    }
    .grad{
      background: linear-gradient(90deg, var(--blue), var(--purple), var(--pink));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .nav-links{display:flex; align-items:center; gap:8px; flex-wrap:wrap; justify-content:flex-end}
    .chip{
      padding:9px 12px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(255,255,255,.03);
      color: rgba(233,237,247,.88);
      font-size:13px;
      transition:.15s transform,.15s border-color,.15s background;
    }
    .chip:hover{
      transform:translateY(-1px);
      border-color: rgba(45,212,255,.28);
      background: rgba(255,255,255,.05);
    }
    .btn{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(124,58,237,.55);
      background: linear-gradient(135deg, rgba(36,115,255,.26), rgba(124,58,237,.26), rgba(255,77,141,.18));
      box-shadow: 0 16px 40px rgba(124,58,237,.12);
      font-weight:900;
      font-size:13px;
      display:inline-flex; align-items:center; gap:8px;
      transition:.15s transform,.15s filter;
      cursor:pointer;
    }
    .btn:hover{transform:translateY(-1px); filter:brightness(1.06)}
    .dot{
      width:10px; height:10px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, var(--blue), var(--purple));
      box-shadow: 0 0 0 5px rgba(45,212,255,.08);
    }

    /* CARDS / LAYOUT */
    .section{padding-top:28px}
    .card{
      border:1px solid var(--line);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card:before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(760px 300px at 20% 0%, rgba(45,212,255,.10), transparent 55%),
        radial-gradient(760px 300px at 80% 0%, rgba(124,58,237,.10), transparent 55%),
        radial-gradient(760px 300px at 50% 100%, rgba(255,77,141,.06), transparent 55%);
      opacity:.65;
      pointer-events:none;
    }
    .card > *{position:relative}

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
      margin-top:14px;
    }
    .col-12{grid-column: span 12}
    .col-8{grid-column: span 8}
    .col-6{grid-column: span 6}
    .col-4{grid-column: span 4}
    @media (max-width: 980px){
      .col-8,.col-6,.col-4{grid-column: span 12}
    }

    .box{padding:18px 18px 18px}
    .muted{color: var(--muted); font-size:14px; margin:0}
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      letter-spacing:.2px;
      word-break: break-all;
      font-weight:800;
    }

    /* HERO */
    .hero{
      padding:44px 0 14px;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr; padding-top:30px}
    }
    .hero-main{padding:26px 22px}
    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size:13px;
    }
    h1{
      margin:14px 0 12px;
      font-size:52px;
      line-height:1.03;
      letter-spacing:-.9px;
    }
    @media (max-width: 520px){ h1{font-size:40px} }
    .lead{
      color: rgba(233,237,247,.88);
      font-size:16px;
      max-width:70ch;
      margin:0 0 18px;
    }
    .cta{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .ghost{
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      font-weight:900;
      font-size:13px;
      transition:.15s border-color,.15s transform,.15s background;
      display:inline-flex; align-items:center; gap:8px;
      cursor:pointer;
    }
    .ghost:hover{
      transform:translateY(-1px);
      border-color: rgba(255,77,141,.22);
      background: rgba(255,255,255,.05);
    }
    .subnote{margin-top:14px; color: rgba(233,237,247,.62); font-size:12.5px}

    /* Right panel (Quick Facts) */
    .side{padding:16px}
    .side h3{margin:0 0 10px; font-size:14px; color: rgba(233,237,247,.92)}
    .kv{
      display:grid; gap:10px;
      padding:14px;
      border:1px solid var(--line);
      border-radius: 16px;
      background: rgba(255,255,255,.03);
      margin-bottom:10px;
    }
    .label{color: var(--muted); font-size:12px}
    .value{font-size:13px; font-weight:900}

    .pills{display:flex; gap:8px; flex-wrap:wrap}
    .pill{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      font-size:12px;
      color: rgba(233,237,247,.86);
      transition:.15s border-color,.15s transform,.15s background;
    }
    .pill:hover{
      transform:translateY(-1px);
      border-color: rgba(45,212,255,.22);
      background: rgba(255,255,255,.05);
    }

    .copy-row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .copy{
      padding:8px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      font-size:12px;
      cursor:pointer; user-select:none;
      transition:.15s transform,.15s border-color,.15s background;
      font-weight:900;
    }
    .copy:hover{
      transform:translateY(-1px);
      border-color: rgba(124,58,237,.24);
      background: rgba(255,255,255,.05);
    }
    .tiny{font-size:12px; color: rgba(233,237,247,.55)}

    /* Mini feature cards */
    .feature h2{margin:0 0 10px; font-size:18px; letter-spacing:-.25px}
    ul.clean,ol.clean{margin:10px 0 0; padding:0 0 0 18px; color: rgba(233,237,247,.88)}
    ul.clean li,ol.clean li{margin:6px 0}

    /* KPI blocks */
    .kpis{display:grid; gap:10px; margin-top:12px}
    .kpi{
      display:flex; justify-content:space-between; gap:10px;
      padding:12px 14px;
      border:1px solid var(--line);
      border-radius: 16px;
      background: rgba(255,255,255,.03);
      align-items:flex-start;
    }
    .kpi b{font-size:13px}
    .kpi span{color: rgba(233,237,247,.62); font-size:12px}

    .callout{
      margin-top:14px;
      padding:12px 14px;
      border-radius: 16px;
      border:1px solid rgba(255,77,141,.18);
      background: rgba(255,77,141,.06);
      color: rgba(233,237,247,.88);
      font-size:13px;
    }

    /* ATM Panel */
    .atm-title{
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
      margin-bottom:8px;
    }
    .status-pill{
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      font-size:12px;
      font-weight:900;
    }

    input.atm-input{
      width:100%;
      margin-top:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--txt);
      outline:none;
    }
    input.atm-input:focus{
      border-color: rgba(45,212,255,.28);
      box-shadow: 0 0 0 6px rgba(45,212,255,.06);
    }

    /* Footer */
    .foot{
      margin-top:24px;
      padding:16px 2px 0;
      border-top:1px solid var(--line);
      color: rgba(233,237,247,.60);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    @media (prefers-reduced-motion: reduce){
      html{scroll-behavior:auto}
    }
  </style>
</head>

<body>
  <div class="gridbg" aria-hidden="true"></div>

  <header class="nav">
    <div class="nav-inner">
      <div class="brand">
        <img src="logo.png" alt="Mr. Quantum logo" />
        <div>Mr. <span class="grad">Quantum</span></div>
      </div>

      <nav class="nav-links" aria-label="Primary">
        <a class="chip" href="#home">HOME</a>
        <a class="chip" href="#about">ABOUT</a>
        <a class="chip" href="#atm">ATM SWAP</a>
        <a class="chip" href="#how">HOW TO BUY</a>
        <a class="chip" href="#tokenomics">TOKENOMICS</a>
        <a class="chip" href="#roadmap">ROADMAP</a>
        <a class="btn" id="buyBtn" href="#" target="_blank" rel="noopener noreferrer"><span class="dot"></span>Buy Now</a>
      </nav>
    </div>
  </header>

  <main class="wrap" id="home">
    <!-- HERO -->
    <section class="hero">
      <div class="card hero-main">
        <div class="kicker"><span class="dot"></span> collapse the timeline · into vibes</div>

        <h1>
          MRQTUM<br/>
          <span class="grad">Mr. Quantum</span>
        </h1>

        <p class="lead">
          A meme coin built for global community energy and clean execution.
          Simple UI, transparent links, and an “ATM-style” swap flow that feels instantly understandable.
        </p>

        <div class="cta">
          <a class="btn" href="#atm"><span class="dot"></span>Use ATM Swap</a>
          <button class="ghost" id="copyCA">Copy Contract (CA)</button>
          <a class="ghost" href="#how">How to Buy</a>
        </div>

        <div class="subnote">
          Not financial advice. Meme coins are high-risk. DYOR.
        </div>

        <div class="callout">
          Security: Always verify the Contract Address (CA) from official channels only.
          Never trust DMs and avoid fake tokens.
        </div>
      </div>

      <!-- Quick facts -->
      <aside class="card side" aria-label="Quick facts">
        <h3>Quick Facts</h3>

        <div class="kv">
          <div class="label">Network</div>
          <div class="value" id="network">Sui</div>
        </div>

        <div class="kv">
          <div class="label">Contract Address (CA)</div>
          <div class="value mono" id="ca">TBA — paste contract address</div>
          <div class="copy-row">
            <div class="copy" data-copy="#ca">Copy CA</div>
            <div class="tiny" id="copyStatus"></div>
          </div>
        </div>

        <div class="kv">
          <div class="label">Official Links</div>
          <div class="pills">
            <a class="pill" href="#" id="linkDex" target="_blank" rel="noopener noreferrer">DEX</a>
            <a class="pill" href="#" id="linkX" target="_blank" rel="noopener noreferrer">X</a>
            <a class="pill" href="#" id="linkTg" target="_blank" rel="noopener noreferrer">Telegram</a>
            <a class="pill" href="#" id="linkDocs" target="_blank" rel="noopener noreferrer">Docs</a>
          </div>
          <div class="tiny" style="margin-top:8px">
            Links open in a new tab.
          </div>
        </div>
      </aside>
    </section>

    <!-- FEATURES -->
    <section class="section" id="about">
      <div class="grid">
        <div class="card col-4 box feature">
          <h2>ABOUT</h2>
          <p class="muted">
            Mr. Quantum is built around one rule: keep it clean and public.
            The meme is the culture. Execution is the credibility.
          </p>
        </div>

        <div class="card col-4 box feature">
          <h2>COMMUNITY</h2>
          <p class="muted">
            Weekly meme contests, creator rewards, and collabs.
            A token that lives through attention and participation.
          </p>
        </div>

        <div class="card col-4 box feature">
          <h2>NO BULLSH*T UX</h2>
          <p class="muted">
            CA copy, official links, and an ATM-style swap experience.
            People instantly know what to do.
          </p>
        </div>
      </div>
    </section>

    <!-- ATM SWAP -->
    <section class="section" id="atm">
      <div class="card box">
        <div class="atm-title">
          <h2 style="margin:0; font-size:20px; letter-spacing:-.35px">MRQTUM ATM Swap</h2>
          <span class="status-pill mono" id="atmStatus">Idle</span>
        </div>

        <p class="muted">
          Send SUI to the deposit address below. Once your deposit is detected by the engine,
          MRQTUM is automatically sent back to the <b>sender wallet</b>.
          This website never stores private keys.
        </p>

        <div class="grid" style="margin-top:12px">
          <!-- LEFT -->
          <div class="col-6">
            <div class="kpi">
              <div>
                <b>Deposit Address (SUI)</b><br/>
                <span class="mono" id="atmDepositAddr">0xDEPOSIT_ADDRESS_TBA</span>
              </div>
              <span>official</span>
            </div>

            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px">
              <button class="btn" type="button" id="atmCopyAddr"><span class="dot"></span>Copy Address</button>
              <a class="ghost" href="#" id="atmExplorerAddr" target="_blank" rel="noopener noreferrer">View on Explorer</a>
            </div>

            <div class="kpi" style="margin-top:12px">
              <div>
                <b>Rate</b><br/>
                <span class="mono" id="atmRate">1 SUI → 10,000 MRQTUM</span>
              </div>
              <span>example</span>
            </div>

            <div class="kpi" style="margin-top:10px">
              <div>
                <b>Minimum Deposit</b><br/>
                <span class="mono" id="atmMin">0.10 SUI</span>
              </div>
              <span>example</span>
            </div>

            <div class="kpi" style="margin-top:10px">
              <div>
                <b>Order ID</b><br/>
                <span class="mono" id="atmOrderId">—</span>
              </div>
              <span>for matching</span>
            </div>

            <div class="callout">
              Important: Send from a wallet you control. Some exchanges may not preserve the original sender address.
            </div>
          </div>

          <!-- RIGHT -->
          <div class="col-6">
            <div class="kpi">
              <div>
                <b>Detected Deposit Tx</b><br/>
                <span class="mono" id="atmDepositTx">—</span>
              </div>
              <span>tx</span>
            </div>

            <div class="kpi" style="margin-top:10px">
              <div>
                <b>Payout Tx (MRQTUM)</b><br/>
                <span class="mono" id="atmPayoutTx">—</span>
              </div>
              <span>tx</span>
            </div>

            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px">
              <button class="btn" type="button" id="atmCreateOrder"><span class="dot"></span>Create Order</button>
              <button class="ghost" type="button" id="atmCheck">Check Status</button>
            </div>

            <div style="margin-top:12px; border:1px solid var(--line); border-radius:16px; background:rgba(255,255,255,.03); padding:12px 14px; max-height:220px; overflow:auto">
              <div class="tiny" style="margin-bottom:6px">ATM Log</div>
              <div id="atmLog" class="mono" style="font-size:12px; color:rgba(233,237,247,.75); white-space:pre-wrap"></div>
            </div>

            <div class="callout" style="border-color: rgba(45,212,255,.18); background: rgba(45,212,255,.06)">
              Safety: Only use the deposit address shown on this official website.
              Beware of impostor links and fake tokens.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- HOW TO BUY -->
    <section class="section" id="how">
      <div class="grid">
        <div class="card col-6 box">
          <h2 style="margin:0 0 10px; font-size:20px; letter-spacing:-.35px">HOW TO BUY</h2>
          <p class="muted">
            Simple, chain-agnostic guide. Use the official links above.
          </p>
          <ol class="clean">
            <li>Install a wallet that supports the network (example: Sui wallet).</li>
            <li>Get some SUI and fund your wallet.</li>
            <li>Use the official DEX link or the ATM Swap section.</li>
            <li>Verify the Contract Address (CA) before swapping.</li>
            <li>Never trust random DMs. Only official site links.</li>
          </ol>
          <div class="callout">
            Tip: For beginners, the ATM Swap flow is easier than manual swapping.
          </div>
        </div>

        <div class="card col-6 box" id="tokenomics">
          <h2 style="margin:0 0 10px; font-size:20px; letter-spacing:-.35px">TOKENOMICS</h2>
          <p class="muted">Edit the numbers in the CONFIG section inside the script.</p>

          <div class="kpis">
            <div class="kpi">
              <div>
                <b>Total Supply</b><br/>
                <span class="mono" id="supply">1,000,000,000</span>
              </div>
              <span>fixed</span>
            </div>

            <div class="kpi">
              <div>
                <b>Liquidity</b><br/>
                <span id="liq">70%</span>
              </div>
              <span>DEX</span>
            </div>

            <div class="kpi">
              <div>
                <b>Community</b><br/>
                <span id="comm">20%</span>
              </div>
              <span>events</span>
            </div>

            <div class="kpi">
              <div>
                <b>Treasury / Ops</b><br/>
                <span id="ops">10%</span>
              </div>
              <span>public wallet</span>
            </div>
          </div>

          <div class="callout">
            No taxes, no nonsense. Keep it simple and transparent.
          </div>
        </div>
      </div>
    </section>

    <!-- ROADMAP -->
    <section class="section" id="roadmap">
      <div class="card box">
        <h2 style="margin:0 0 10px; font-size:20px; letter-spacing:-.35px">ROADMAP</h2>
        <p class="muted">
          The roadmap is an execution log. Community momentum first, clean iterations always.
        </p>

        <div class="grid">
          <div class="card col-4 box" style="background:rgba(255,255,255,.03)">
            <h2 style="font-size:16px; margin:0 0 8px">Phase 1</h2>
            <p class="muted">Launch · Meme · Establish official channels</p>
            <ul class="clean">
              <li>Official website + CA pinned</li>
              <li>DEX listing + liquidity</li>
              <li>First meme contest</li>
            </ul>
          </div>

          <div class="card col-4 box" style="background:rgba(255,255,255,.03)">
            <h2 style="font-size:16px; margin:0 0 8px">Phase 2</h2>
            <p class="muted">Vibes · Community rewards · Partner collabs</p>
            <ul class="clean">
              <li>Creator rewards</li>
              <li>Community events</li>
              <li>Collab wave</li>
            </ul>
          </div>

          <div class="card col-4 box" style="background:rgba(255,255,255,.03)">
            <h2 style="font-size:16px; margin:0 0 8px">Phase 3</h2>
            <p class="muted">Meme takeover · Brand expansion</p>
            <ul class="clean">
              <li>Major campaigns</li>
              <li>On-chain utility experiments</li>
              <li>Global community push</li>
            </ul>
          </div>
        </div>

        <div class="callout" style="margin-top:14px">
          Mr. Quantum is a meme coin with no intrinsic value or expectation of financial return.
          It exists for entertainment and community culture.
        </div>
      </div>
    </section>

    <footer class="foot">
      <div>© <span id="year"></span> Mr. Quantum (MRQTUM)</div>
      <div>Not financial advice · Built for memes, not promises.</div>
    </footer>
  </main>

  <script>
    // =========================
    // CONFIG (EDIT HERE ONLY)
    // =========================
    const CONFIG = {
      network: "Sui",
      contractAddress: "TBA — paste contract address",

      links: {
        dex: "https://example.com",       // DEX swap link
        x: "https://x.com/example",       // X
        telegram: "https://t.me/example", // Telegram
        docs: "https://example.com/docs"  // Docs
      },

      tokenomics: {
        supply: "1,000,000,000",
        liquidity: "70%",
        community: "20%",
        ops: "10%"
      },

      atm: {
        // 너의 PC 봇/서버 API 주소로 바꿔라.
        // - 로컬 테스트: http://127.0.0.1:8787 (단, 외부 사용자는 접속 불가)
        // - 배포 후: https://api.yourdomain.com
        apiBase: "http://127.0.0.1:8787",

        // explorer
        explorerAddress: (addr) => `https://suiexplorer.com/address/${encodeURIComponent(addr)}`,
        explorerTx: (tx) => `https://suiexplorer.com/tx/${encodeURIComponent(tx)}`,
      }
    };

    // =========================
    // APPLY CONFIG
    // =========================
    document.getElementById("year").textContent = new Date().getFullYear();

    const elNetwork = document.getElementById("network");
    const elCA = document.getElementById("ca");

    elNetwork.textContent = CONFIG.network;
    elCA.textContent = CONFIG.contractAddress;

    // links
    const setLink = (id, url) => {
      const el = document.getElementById(id);
      if(!el) return;
      el.href = url || "#";
    };
    setLink("linkDex", CONFIG.links.dex);
    setLink("linkX", CONFIG.links.x);
    setLink("linkTg", CONFIG.links.telegram);
    setLink("linkDocs", CONFIG.links.docs);

    // buy button
    const buyBtn = document.getElementById("buyBtn");
    buyBtn.href = CONFIG.links.dex || "#";

    // tokenomics
    document.getElementById("supply").textContent = CONFIG.tokenomics.supply;
    document.getElementById("liq").textContent = CONFIG.tokenomics.liquidity;
    document.getElementById("comm").textContent = CONFIG.tokenomics.community;
    document.getElementById("ops").textContent = CONFIG.tokenomics.ops;

    // Copy utils
    async function copyText(text, statusEl){
      try{
        await navigator.clipboard.writeText(text);
        if(statusEl){
          statusEl.textContent = "Copied.";
          setTimeout(()=> statusEl.textContent = "", 1200);
        }
      }catch{
        if(statusEl){
          statusEl.textContent = "Copy failed.";
          setTimeout(()=> statusEl.textContent = "", 1800);
        }
      }
    }

    // Copy CA
    document.querySelectorAll("[data-copy]").forEach(btn => {
      btn.addEventListener("click", () => {
        const target = document.querySelector(btn.getAttribute("data-copy"));
        const text = (target?.textContent || "").trim();
        copyText(text, document.getElementById("copyStatus"));
      });
    });

    document.getElementById("copyCA")?.addEventListener("click", () => {
      copyText((CONFIG.contractAddress || "").trim(), document.getElementById("copyStatus"));
    });

    // =========================
    // ATM SWAP (Frontend UI)
    // =========================
    const ATM_API_BASE = CONFIG.atm.apiBase;

    const elAtmStatus = document.getElementById("atmStatus");
    const elAtmAddr   = document.getElementById("atmDepositAddr");
    const elAtmRate   = document.getElementById("atmRate");
    const elAtmMin    = document.getElementById("atmMin");
    const elAtmOrder  = document.getElementById("atmOrderId");
    const elAtmDepTx  = document.getElementById("atmDepositTx");
    const elAtmPayTx  = document.getElementById("atmPayoutTx");
    const elAtmLog    = document.getElementById("atmLog");
    const linkAtmAddr = document.getElementById("atmExplorerAddr");

    const logATM = (msg) => {
      const ts = new Date().toLocaleTimeString();
      elAtmLog.textContent = `[${ts}] ${msg}\n` + elAtmLog.textContent;
    };

    async function apiGet(path){
      const res = await fetch(`${ATM_API_BASE}${path}`, { method:"GET" });
      if(!res.ok){
        const t = await res.text().catch(()=> "");
        throw new Error(`API ${res.status}: ${t || "request failed"}`);
      }
      return res.json();
    }

    async function apiPost(path, body){
      const res = await fetch(`${ATM_API_BASE}${path}`, {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(body || {})
      });
      if(!res.ok){
        const t = await res.text().catch(()=> "");
        throw new Error(`API ${res.status}: ${t || "request failed"}`);
      }
      return res.json();
    }

    async function loadATMConfig(){
      try{
        // expected: { depositAddress, rateText, minText }
        const cfg = await apiGet("/api/atm/config");

        if(cfg.depositAddress) elAtmAddr.textContent = cfg.depositAddress;
        if(cfg.rateText) elAtmRate.textContent = cfg.rateText;
        if(cfg.minText) elAtmMin.textContent = cfg.minText;

        linkAtmAddr.href = CONFIG.atm.explorerAddress(elAtmAddr.textContent.trim());
        logATM("ATM config loaded.");
      }catch(e){
        linkAtmAddr.href = CONFIG.atm.explorerAddress(elAtmAddr.textContent.trim());
        logATM(`Config load failed: ${e.message}`);
        logATM("If you haven't started your backend engine yet, this is normal.");
      }
    }

    async function createOrder(){
      try{
        elAtmStatus.textContent = "Creating…";
        // expected: { orderId, expiresAt }
        const data = await apiPost("/api/atm/order", {});
        elAtmOrder.textContent = data.orderId || "—";
        elAtmStatus.textContent = "Order created";
        logATM(`Order created: ${elAtmOrder.textContent}`);
        logATM("Now send SUI to the deposit address. Then click Check Status.");
      }catch(e){
        elAtmStatus.textContent = "Order failed";
        logATM(`Order create failed: ${e.message}`);
      }
    }

    async function checkStatus(){
      try{
        const orderId = (elAtmOrder.textContent || "").trim();
        if(!orderId || orderId === "—"){
          logATM("Create Order first.");
          return;
        }

        elAtmStatus.textContent = "Checking…";

        // expected:
        // { status, depositTx, payoutTx, message }
        const s = await apiGet(`/api/atm/status?orderId=${encodeURIComponent(orderId)}`);

        elAtmStatus.textContent = s.status || "Unknown";

        if(s.depositTx){
          elAtmDepTx.innerHTML = `<a href="${CONFIG.atm.explorerTx(s.depositTx)}" target="_blank" rel="noopener noreferrer">${s.depositTx}</a>`;
        }
        if(s.payoutTx){
          elAtmPayTx.innerHTML = `<a href="${CONFIG.atm.explorerTx(s.payoutTx)}" target="_blank" rel="noopener noreferrer">${s.payoutTx}</a>`;
        }
        if(s.message) logATM(s.message);
        logATM(`Status: ${elAtmStatus.textContent}`);
      }catch(e){
        elAtmStatus.textContent = "Check failed";
        logATM(`Status check failed: ${e.message}`);
      }
    }

    document.getElementById("atmCopyAddr")?.addEventListener("click", () => {
      copyText(elAtmAddr.textContent.trim());
      logATM("Deposit address copied.");
    });

    document.getElementById("atmCreateOrder")?.addEventListener("click", createOrder);
    document.getElementById("atmCheck")?.addEventListener("click", checkStatus);

    // Init
    loadATMConfig();
  </script>
</body>
</html>
